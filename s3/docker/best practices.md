
خوب میدونیم هر دستور تو dockerfile میاد یه لایه جدید میسازه داکر میاد برای افزایش سرعت این لایه هارو کش میکنه، تا اگه تغییر نکردن، دوباره اجراشون نکنه.


اصل مهم: تغییر در یه لایه باعث استفاده نشدن کش لایه های بعدی میشه.


COPY . .
RUN npm install



COPY package*.json ./
RUN npm install
COPY . .


استفاده از داکر ایگنور باعث میشه فایل هایی که لازم نداریم رو پروداکت رو حذف کنیم، مثل .git


مثلا با ترکیب دستور های RUN با && میشه لایه هارو کم کرد.


برای کپی ها اول فایل های ثابتتر رو کپی کنیم بعدش کد ها 
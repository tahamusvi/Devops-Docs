خوب فرق داکر سوارم با کامپوز چیه ؟

کامپوز برای اجرا چند سرویس روی یک ماشین هستش
سوارم برای اجرای سرویس ها روی چند ماشین و مدیریت آنهاست.


خوب برای یاد گرفتن با آموزش خود داکر شروع کردم.


روی سه تا سرور انگار داکر و داکر سوارم نصب کردیم

docker swarm init --advertise-addr eth0
 یه منیجر ایجاد میکنیم

docker swarm join --token SWMTKN-... 10.0.0.1:2377

دوتا نود دیگه رو با دستوری که بعد از دستور ساخت منیجر بهمون میده جوین میکنیم


حالا اگر docker node ls بگیریم لیست نود هارو باید ببینیم

---

با این دستور مثلا سه تا انجین ایکس اوردیم بالا که روی نود ها هستن
docker service create --name web --replicas 3 -p 8080:80 nginx


---


خوب الان رسیدیم به داکر استک معادل داکر کامپوز



|ویژگی|`docker-compose`|`docker stack`|
|---|---|---|
|مناسب برای|لوکال / dev|**Swarm cluster**|
|اجرا در چند نود|❌ نه|✅ بله|
|حالت تولید (production)|❌ خیر|✅ بله|
|دستورات CLI|`docker-compose up`|`docker stack deploy`|
|فرمت فایل|`docker-compose.yml`|`stack.yml` یا هر نام با `version: 3` به بالا|

docker stack deploy -c stack.yml mystack
به جای docker-compose up -d



version: "3.8"
services:
  web:
    image: nginx
    ports:
      - "8080:80"
    deploy:
      replicas: 3

